{"ast":null,"code":"'use strict';\n\nvar Readable = require('readable-stream').Readable;\n\nvar inherits = require('inherits');\n\ninherits(Noms, Readable);\n\nfunction Noms(options) {\n  Readable.call(this, options);\n  this.inProgress = false;\n  this.lastPush = void 0;\n  this.started = false;\n  this.errored = false;\n}\n\nNoms.prototype.push = function (chunk, encoding) {\n  this.lastPush = Readable.prototype.push.call(this, chunk, encoding);\n  return this.lastPush;\n};\n\nNoms.prototype.nom = function (callback) {\n  callback(null, null);\n};\n\nNoms.prototype._read = function (size) {\n  if (this.inProgress || this.errored) {\n    return;\n  }\n\n  if (this.started === false) {\n    this.inProgress = true;\n    this.callStart(size);\n    return;\n  }\n\n  this.inProgress = true;\n  this.callRead(size);\n};\n\nNoms.prototype._before = function (next) {\n  next();\n};\n\nNoms.prototype.callRead = function (size) {\n  var useSize = this.nom.length > 1; // so if nothing is pushed, we'll go agian\n\n  this.lastPush = true;\n  var self = this;\n\n  function cb(err, chunk) {\n    if (err) {\n      self.errored = true;\n      self.inProgress = false;\n      self.emit('error', err);\n      return;\n    }\n\n    if (chunk !== undefined) {\n      self.push(chunk);\n    }\n\n    if (self.lastPush) {\n      return self.callRead(size);\n    } else {\n      self.inProgress = false;\n    }\n  }\n\n  if (useSize) {\n    this.nom(size, cb);\n  } else {\n    this.nom(cb);\n  }\n};\n\nNoms.prototype.callStart = function (size) {\n  var self = this;\n\n  function cb(err, chunk) {\n    self.started = true;\n\n    if (err) {\n      self.errored = true;\n      self.inProgress = false;\n      self.emit('error', err);\n      return;\n    }\n\n    if (chunk !== undefined) {\n      self.push(chunk);\n    }\n\n    self.callRead(size);\n  }\n\n  this._before(cb);\n};\n\nfunction ctor(read, before) {\n  inherits(YourStream, Noms);\n\n  function YourStream(opts) {\n    Noms.call(this, opts);\n  }\n\n  YourStream.prototype.nom = read;\n\n  if (typeof before === 'function') {\n    YourStream.prototype._before = before;\n  }\n\n  return YourStream;\n}\n\nmodule.exports = exports = function (options, read, before) {\n  if (typeof options === 'function') {\n    before = read;\n    read = options;\n    options = {};\n  }\n\n  return new (ctor(read, before))(options);\n};\n\nexports.ctor = ctor;\n\nexports.obj = function (options, read, before) {\n  var out = {};\n\n  if (typeof options === 'function') {\n    before = read;\n    read = options;\n    options = undefined;\n  }\n\n  options = options || {};\n  Object.keys(options).forEach(function (key) {\n    out[key] = options[key];\n  });\n  out.objectMode = true;\n  return new (ctor(read, before))(out);\n};","map":{"version":3,"sources":["C:/Users/joshc/node_modules/noms/index.js"],"names":["Readable","require","inherits","Noms","options","call","inProgress","lastPush","started","errored","prototype","push","chunk","encoding","nom","callback","_read","size","callStart","callRead","_before","next","useSize","length","self","cb","err","emit","undefined","ctor","read","before","YourStream","opts","module","exports","obj","out","Object","keys","forEach","key","objectMode"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Readable = require('readable-stream').Readable;\nvar inherits = require('inherits');\ninherits(Noms, Readable);\nfunction Noms (options) {\n  Readable.call(this,options);\n  this.inProgress = false;\n  this.lastPush = void 0;\n  this.started = false;\n  this.errored = false;\n}\nNoms.prototype.push = function(chunk, encoding) {\n      this.lastPush = Readable.prototype.push.call(this, chunk, encoding);\n      return this.lastPush;\n  };\nNoms.prototype.nom = function (callback) {\n  callback(null, null);\n};\nNoms.prototype._read = function (size) {\n  if (this.inProgress || this.errored) {\n    return;\n  }\n  if (this.started === false) {\n    this.inProgress = true;\n    this.callStart(size);\n    return;\n  }\n  this.inProgress = true;\n  this.callRead(size);\n};\nNoms.prototype._before = function (next) {\n  next();\n};\nNoms.prototype.callRead = function (size) {\n  var useSize = this.nom.length > 1;\n  // so if nothing is pushed, we'll go agian\n  this.lastPush = true;\n  var self = this;\n  function cb(err, chunk) {\n    if (err) {\n      self.errored = true;\n      self.inProgress = false;\n      self.emit('error', err);\n      return;\n    }\n    if (chunk !== undefined) {\n      self.push(chunk);\n    }\n    if (self.lastPush) {\n      return self.callRead(size);\n    } else {\n      self.inProgress = false;\n    }\n  }\n  if (useSize) {\n    this.nom(size, cb);\n  } else {\n     this.nom(cb);\n  }\n};\nNoms.prototype.callStart = function (size) {\n  var self = this;\n  function cb(err, chunk) {\n    self.started = true;\n    if (err) {\n      self.errored = true;\n      self.inProgress = false;\n      self.emit('error', err);\n      return;\n    }\n    if (chunk !== undefined) {\n      self.push(chunk);\n    }\n    self.callRead(size);\n  }\n  this._before(cb);\n};\nfunction ctor(read, before) {\n  inherits(YourStream, Noms);\n  function YourStream (opts) {\n    Noms.call(this, opts);\n  }\n  YourStream.prototype.nom = read;\n  if (typeof before === 'function') {\n    YourStream.prototype._before = before;\n  }\n  return YourStream;\n}\nmodule.exports = exports = function(options, read, before) {\n  if (typeof options === 'function') {\n    before = read;\n    read = options;\n    options = {};\n  }\n  return new (ctor(read, before))(options);\n};\nexports.ctor = ctor;\nexports.obj = function(options, read, before) {\n  var out = {};\n  if (typeof options === 'function') {\n    before = read;\n    read = options;\n    options = undefined;\n  }\n  options = options || {};\n  Object.keys(options).forEach(function (key) {\n    out[key] = options[key];\n  });\n  out.objectMode = true;\n  return new (ctor(read, before))(out);\n};"]},"metadata":{},"sourceType":"script"}